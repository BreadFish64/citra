#version 450
#include "../utils.comp"

layout(binding = 0) writeonly buffer src_buffer {
    uint16_t colors[];
};

layout(binding = 1, rgba8ui) uniform readonly lowp uimage2D dst_image;

void main() {
    u16vec4 rgba = u16vec4(imageLoad(dst_image, GetImageCoord()));
    rgba = (rgba >> 4) & 0x0Fus;
    rgba <<= ivec4(12, 8, 4, 0);
    colors[GetAddress()] = rgba.r | rgba.g | rgba.b | rgba.a;
}
